{"version":3,"names":["floatedCss","Floated","titleSlotEl","observer","observeImageSrcChange","imgElement","callback","HTMLImageElement","Error","this","MutationObserver","mutations","forEach","mutation","type","attributeName","src","observe","attributes","attributeFilter","componentDidLoad","nodes","assignedElements","flatten","img","initialSrc","getAttribute","hostEl","style","setProperty","newSrc","disconnectedCallback","disconnect","render","h","Host","key","class","name","ref","el"],"sources":["src/components/floated/floated.scss?tag=mt-floated&encapsulation=scoped","src/components/floated/floated.tsx"],"sourcesContent":["$mt-breakpoints: (\r\n  sm: 576px,\r\n  md: 768px,\r\n  lg: 992px,\r\n  xl: 1200px,\r\n  xxl: 1400px,\r\n);\r\n\r\n:host {\r\n  --mt-imagem-floated-margin: 0 0 30px 0;\r\n\r\n  display: block;\r\n\r\n  &::after {\r\n    content: '';\r\n    display: table; /* or block */\r\n    clear: both;\r\n  }\r\n}\r\n\r\n::slotted(img) {\r\n  shape-outside: var(--mt-imagem-floated-image);\r\n  float: right;\r\n  margin: var(--mt-imagem-floated-margin);\r\n  max-width: 100%;\r\n}\r\n","import { Component, h, Host, Element } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'mt-floated',\r\n  styleUrl: 'floated.scss',\r\n  scoped: true,\r\n})\r\nexport class Floated {\r\n  @Element() hostEl!: HTMLElement;\r\n\r\n  private titleSlotEl!: HTMLSlotElement;\r\n  private observer!: MutationObserver;\r\n\r\n  observeImageSrcChange(imgElement, callback) {\r\n    if (!(imgElement instanceof HTMLImageElement)) {\r\n      throw new Error('Target must be an <img> element');\r\n    }\r\n\r\n    this.observer = new MutationObserver(mutations => {\r\n      mutations.forEach(mutation => {\r\n        if (mutation.type === 'attributes' && mutation.attributeName === 'src') {\r\n          callback(imgElement.src);\r\n        }\r\n      });\r\n    });\r\n\r\n    this.observer.observe(imgElement, {\r\n      attributes: true,\r\n      attributeFilter: ['src'],\r\n    });\r\n\r\n    return this.observer;\r\n  }\r\n\r\n  componentDidLoad() {\r\n    if (this.titleSlotEl) {\r\n      const nodes = this.titleSlotEl.assignedElements({ flatten: true });\r\n      const img = nodes[0];\r\n\r\n      const initialSrc = nodes[0].getAttribute('src');\r\n\r\n      this.hostEl.style.setProperty('--mt-imagem-floated-image', `url('${initialSrc}')`);\r\n\r\n      this.observeImageSrcChange(img, newSrc => {\r\n        this.hostEl.style.setProperty('--mt-imagem-floated-image', `url('${newSrc}')`);\r\n      });\r\n    }\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.observer.disconnect();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host class=\"mt-floated\">\r\n        <slot name=\"image\" ref={el => (this.titleSlotEl = el as HTMLSlotElement)}></slot>\r\n        <slot></slot>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"yDAAA,MAAMA,EAAa,wQ,MCONC,EAAO,M,qDAGVC,YACAC,SAER,qBAAAC,CAAsBC,EAAYC,GAChC,KAAMD,aAAsBE,kBAAmB,CAC7C,MAAM,IAAIC,MAAM,kC,CAGlBC,KAAKN,SAAW,IAAIO,kBAAiBC,IACnCA,EAAUC,SAAQC,IAChB,GAAIA,EAASC,OAAS,cAAgBD,EAASE,gBAAkB,MAAO,CACtET,EAASD,EAAWW,I,IAEtB,IAGJP,KAAKN,SAASc,QAAQZ,EAAY,CAChCa,WAAY,KACZC,gBAAiB,CAAC,SAGpB,OAAOV,KAAKN,Q,CAGd,gBAAAiB,GACE,GAAIX,KAAKP,YAAa,CACpB,MAAMmB,EAAQZ,KAAKP,YAAYoB,iBAAiB,CAAEC,QAAS,OAC3D,MAAMC,EAAMH,EAAM,GAElB,MAAMI,EAAaJ,EAAM,GAAGK,aAAa,OAEzCjB,KAAKkB,OAAOC,MAAMC,YAAY,4BAA6B,QAAQJ,OAEnEhB,KAAKL,sBAAsBoB,GAAKM,IAC9BrB,KAAKkB,OAAOC,MAAMC,YAAY,4BAA6B,QAAQC,MAAW,G,EAKpF,oBAAAC,GACEtB,KAAKN,SAAS6B,Y,CAGhB,MAAAC,GACE,OACEC,EAACC,EAAK,CAAAC,IAAA,2CAAAC,MAAM,cACVH,EAAA,QAAAE,IAAA,2CAAME,KAAK,QAAQC,IAAKC,GAAO/B,KAAKP,YAAcsC,IAClDN,EAAa,QAAAE,IAAA,6C","ignoreList":[]}